(function() {
  var Model, View;

  Model = require('../lib/console/console');

  View = require('../lib/console/console-element');

  describe('Output Module - Console Element', function() {
    var model, tab, view, _ref;
    _ref = [], model = _ref[0], view = _ref[1], tab = _ref[2];
    beforeEach(function() {
      model = new Model();
      view = new View(model);
      view.show = jasmine.createSpy('show');
      view.hide = jasmine.createSpy('hide');
      tab = model.getTab({
        project: 'foo',
        name: 'bar'
      });
      tab.focus();
      return jasmine.attachToDOM(view.element);
    });
    afterEach(function() {
      model.destroy();
      return view.detach();
    });
    it('has an active tab', function() {
      expect(view.tabs.children()[0]).toEqual(tab.header[0]);
      expect(view.output.children()[0]).toEqual(tab.view[0]);
      return expect(view.name.text()).toBe('bar of foo');
    });
    describe('when clicking the close button', function() {
      return it('closes the view', function() {
        view.find('.icon-x').click();
        return expect(view.hide).toHaveBeenCalled();
      });
    });
    return describe('when adding another tab', function() {
      var tab2;
      tab2 = null;
      beforeEach(function() {
        return tab2 = model.getTab({
          project: 'foo',
          name: 'bar2'
        });
      });
      it('adds a new tab header', function() {
        return expect(view.tabs.children()[1]).toEqual(tab2.header[0]);
      });
      describe('when clicking on the header', function() {
        beforeEach(function() {
          return tab2.header.find('.name').click();
        });
        it('focuses the new tab', function() {
          expect(view.active).toBe(tab2);
          return expect(view.name.text()).toBe('bar2 of foo');
        });
        return it('highlights the new tab', function() {
          return expect(view.tabs.children()[1].classList.contains('active')).toBe(true);
        });
      });
      return describe('when removing the new tab', function() {
        beforeEach(function() {
          tab2.focus();
          return tab2.header.find('.close').click();
        });
        return it('focuses the old tab', function() {
          expect(view.tabs.children().length).toBe(1);
          expect(view.output.children()[0]).toEqual(tab.view[0]);
          return expect(view.active).toBe(tab);
        });
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL2hvbWUvbml2Ly5hdG9tL3BhY2thZ2VzL2J1aWxkLXRvb2xzL3NwZWMvY29uc29sZS1lbGVtZW50LXNwZWMuY29mZmVlIgogIF0sCiAgIm5hbWVzIjogW10sCiAgIm1hcHBpbmdzIjogIkFBQUE7QUFBQSxNQUFBLFdBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQVEsT0FBQSxDQUFRLHdCQUFSLENBQVIsQ0FBQTs7QUFBQSxFQUNBLElBQUEsR0FBTyxPQUFBLENBQVEsZ0NBQVIsQ0FEUCxDQUFBOztBQUFBLEVBR0EsUUFBQSxDQUFTLGlDQUFULEVBQTRDLFNBQUEsR0FBQTtBQUMxQyxRQUFBLHNCQUFBO0FBQUEsSUFBQSxPQUFxQixFQUFyQixFQUFDLGVBQUQsRUFBUSxjQUFSLEVBQWMsYUFBZCxDQUFBO0FBQUEsSUFFQSxVQUFBLENBQVcsU0FBQSxHQUFBO0FBQ1QsTUFBQSxLQUFBLEdBQVksSUFBQSxLQUFBLENBQUEsQ0FBWixDQUFBO0FBQUEsTUFDQSxJQUFBLEdBQVcsSUFBQSxJQUFBLENBQUssS0FBTCxDQURYLENBQUE7QUFBQSxNQUVBLElBQUksQ0FBQyxJQUFMLEdBQVksT0FBTyxDQUFDLFNBQVIsQ0FBa0IsTUFBbEIsQ0FGWixDQUFBO0FBQUEsTUFHQSxJQUFJLENBQUMsSUFBTCxHQUFZLE9BQU8sQ0FBQyxTQUFSLENBQWtCLE1BQWxCLENBSFosQ0FBQTtBQUFBLE1BSUEsR0FBQSxHQUFNLEtBQUssQ0FBQyxNQUFOLENBQWE7QUFBQSxRQUFBLE9BQUEsRUFBUyxLQUFUO0FBQUEsUUFBZ0IsSUFBQSxFQUFNLEtBQXRCO09BQWIsQ0FKTixDQUFBO0FBQUEsTUFLQSxHQUFHLENBQUMsS0FBSixDQUFBLENBTEEsQ0FBQTthQU1BLE9BQU8sQ0FBQyxXQUFSLENBQW9CLElBQUksQ0FBQyxPQUF6QixFQVBTO0lBQUEsQ0FBWCxDQUZBLENBQUE7QUFBQSxJQVdBLFNBQUEsQ0FB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

//# sourceURL=/home/niv/.atom/packages/build-tools/spec/console-element-spec.coffee
