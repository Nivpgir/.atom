(function() {
  var Modifiers, Queue;

  Queue = require('../lib/pipeline/queue');

  Modifiers = require('../lib/modifier/modifier');

  describe('Queue', function() {
    var command, modifier, queue;
    queue = null;
    command = null;
    modifier = null;
    beforeEach(function() {
      var out;
      command = {
        project: '/home/fabian/.atom/packages/build-tools/spec/fixtures',
        name: 'Test',
        command: 'echo Hello World',
        wd: '.',
        env: {},
        modifier: {
          test: {
            t: 1
          }
        },
        stdout: {
          highlighting: 'nh'
        },
        stderr: {
          highlighting: 'nh'
        },
        output: {
          console: {
            close_success: false
          }
        },
        version: 1
      };
      out = {
        "in": function(queue) {
          queue.queue[0].t = queue.queue[0].modifier.test.t;
        }
      };
      modifier = Modifiers.addModule('test', out);
      return queue = new Queue(command);
    });
    afterEach(function() {
      return modifier.dispose();
    });
    return describe('On ::run', function() {
      var p, w;
      p = null;
      w = null;
      beforeEach(function() {
        p = queue.run();
        p.then(function(worker) {
          return w = worker;
        });
        return waitsForPromise(function() {
          return p;
        });
      });
      return it('returns a valid QueueWorker', function() {
        expect(w.queue.queue.length).toBe(1);
        expect(w.queue.queue[0].name).toBe('Test');
        return expect(w.queue.queue[0].t).toBe(1);
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL2hvbWUvbml2Ly5hdG9tL3BhY2thZ2VzL2J1aWxkLXRvb2xzL3NwZWMvcXVldWUtc3BlYy5jb2ZmZWUiCiAgXSwKICAibmFtZXMiOiBbXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUFBLE1BQUEsZ0JBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQVEsT0FBQSxDQUFRLHVCQUFSLENBQVIsQ0FBQTs7QUFBQSxFQUNBLFNBQUEsR0FBWSxPQUFBLENBQVEsMEJBQVIsQ0FEWixDQUFBOztBQUFBLEVBR0EsUUFBQSxDQUFTLE9BQVQsRUFBa0IsU0FBQSxHQUFBO0FBQ2hCLFFBQUEsd0JBQUE7QUFBQSxJQUFBLEtBQUEsR0FBUSxJQUFSLENBQUE7QUFBQSxJQUNBLE9BQUEsR0FBVSxJQURWLENBQUE7QUFBQSxJQUVBLFFBQUEsR0FBVyxJQUZYLENBQUE7QUFBQSxJQUlBLFVBQUEsQ0FBVyxTQUFBLEdBQUE7QUFDVCxVQUFBLEdBQUE7QUFBQSxNQUFBLE9BQUEsR0FBVTtBQUFBLFFBQ1IsT0FBQSxFQUFTLHVEQUREO0FBQUEsUUFFUixJQUFBLEVBQU0sTUFGRTtBQUFBLFFBR1IsT0FBQSxFQUFTLGtCQUhEO0FBQUEsUUFJUixFQUFBLEVBQUksR0FKSTtBQUFBLFFBS1IsR0FBQSxFQUFLLEVBTEc7QUFBQSxRQU1SLFFBQUEsRUFDRTtBQUFBLFVBQUEsSUFBQSxFQUFNO0FBQUEsWUFDSixDQUFBLEVBQUcsQ0FEQztXQUFOO1NBUE07QUFBQSxRQVVSLE1BQUEsRUFDRTtBQUFBLFVBQUEsWUFBQSxFQUFjLElBQWQ7U0FYTTtBQUFBLFFBWVIsTUFBQSxFQUNFO0FBQUEsVUFBQSxZQUFBLEVBQWMsSUFBZDtTQWJNO0FBQUEsUUFjUixNQUFBLEVBQ0U7QUFBQSxVQUFBLE9BQUEsRUFDRTtBQUFBLFlBQUEsYUFBQSxFQUFlLEtBQWY7V0FERjtTQWZNO0FBQUEsUUFpQlIsT0FBQSxFQUFTLENBakJEO09BQVYsQ0FBQTtBQUFBLE1BbUJBLEdBQUEsR0FBTTtBQUFBLFFBQ0osSUFBQSxFQUFJLFNBQUMsS0FBRCxHQUFBO0FBQ0YsVUFBQSxLQUFLLENBQUMsS0FBTSxDQUFBLENBQUEsQ0FBRSxDQUFDLENBQWYsR0FBbUIsS0FBSyxDQUFDLEtBQU0sQ0FBQSxDQUFBLENBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQWhELENBREU7UUFBQSxDQURBO09BbkJOLENBQUE7QUFBQSxNQXdCQSxRQUFBLEdBQVcsU0FBUyxDQUFDLFNBQVYsQ0FBb0IsTUFBcEIsRUFBNEIsR0FBNUIsQ0F4QlgsQ0FBQTthQXlCQSxLQUFBLEdBQVksSUFBQSxLQUFBLENBQU0sT0FBTixFQTFCSDtJQUFBLENBQVgsQ0FKQSxDQUFBO0FBQUEsSUFnQ0EsU0FBQSxDQUFVLFNBQUEsR0FBQTthQUNSLFFBQVEsQ0FBQyxPQUFULENBQUEsRUFEUTtJQUFBLENBQVYsQ0FoQ0EsQ0FBQTtXQW1DQSxRQUFBLENBQVMsVUFBVCxFQUFxQixTQUFBLEdBQUE7QUFDbkIsVUFBQSxJQUFBO0FBQUEsTUFBQSxDQUFBLEdBQUksSUFBSixDQUFBO0FBQUEsTUFDQSxDQUFBLEdBQUksSUFESixDQUFBO0FBQUEsTUFHQSxVQUFBLENBQVcsU0FBQSxHQUFBO0FBQ1QsUUFBQSxDQUFBLEdBQUksS0FBSyxDQUFDLEdBQU4sQ0FBQSxDQUFKLENBQUE7QUFBQSxRQUNBLENBQUMsQ0FBQyxJQUFGLENBQU8sU0FBQyxNQUFELEdBQUE7aUJBQVksQ0FBQSxHQUFJLE9BQWhCO1FBQUEsQ0FBUCxDQURBLENBQUE7ZUFFQSxlQUFBLENBQWdCLFNBQUEsR0FBQTtpQkFBRyxFQUFIO1FBQUEsQ0FBaEIsRUFIUztNQUFBLENBQVgsQ0FIQSxDQUFBO2FBUUEsRUFBQSxDQUFHLDZCQUFILEVBQWtDLFNBQUEsR0FBQTtBQUNoQyxRQUFBLE1BQUEsQ0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFyQixDQUE0QixDQUFDLElBQTdCLENBQWtDLENBQWxDLENBQUEsQ0FBQTtBQUFBLFFBQ0EsTUFBQSxDQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBTSxDQUFBLENBQUEsQ0FBRSxDQUFDLElBQXhCLENBQTZCLENBQUMsSUFBOUIsQ0FBbUMsTUFBbkMsQ0FEQSxDQUFBO2VBRUEsTUFBQSxDQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBTSxDQUFBLENBQUEsQ0FBRSxDQUFDLENBQXhCLENBQTBCLENBQUMsSUFBM0IsQ0FBZ0MsQ0FBaEMsRUFIZ0M7TUFBQSxDQUFsQyxFQVRtQjtJQUFBLENBQXJCLEVBcENnQjtFQUFBLENBQWxCLENBSEEsQ0FBQTtBQUFBIgp9

//# sourceURL=/home/niv/.atom/packages/build-tools/spec/queue-spec.coffee
